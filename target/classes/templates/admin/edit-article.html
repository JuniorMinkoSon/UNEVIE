<!doctype html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">

<head>
    <div th:replace="~{fragments/head :: head (title='Admin - Modifier Article')}"></div>
    <link rel="stylesheet" th:href="@{/css/admin-dashboard.css}">
</head>


<body>
    <div th:replace="~{fragments/admin-layout :: layout(content=~{::section})}">
        <section>
            <div class="container-fluid">
                <div class="glass-card">
                    <h1>
                        <i class="fa-solid fa-pen-to-square"></i>
                        Modifier l'Article
                    </h1>

                    <form th:action="@{/admin/article/update/{id}(id=${article.id})}" th:object="${article}"
                        method="post" enctype="multipart/form-data">
                        <div>
                            <label for="titre">Titre de l'article</label>
                            <input id="titre" class="form-input" type="text" th:field="*{titre}"
                                placeholder="Titre de l'article" required>
                        </div>

                        <div>
                            <label for="category">Catégorie</label>
                            <select id="category" class="form-input" th:field="*{categoryId}" required>
                                <option value="">-- Choisir une catégorie --</option>
                                <option th:each="cat : ${categories}" th:value="${cat.id}" th:text="${cat.libelle}"
                                    th:selected="${cat.id == article.categoryId}">
                                </option>
                            </select>
                        </div>

                        <div>
                            <label for="contenu">Contenu</label>
                            <textarea id="contenu" class="form-input" th:field="*{contenu}"
                                placeholder="Contenu de l'article..." required></textarea>
                        </div>

                        <!-- Image actuelle -->
                        <div class="current-image" th:if="${article.imageUrl}">
                            <p>Image actuelle :</p>
                            <img th:src="@{/uploads/{img}(img=${article.imageUrl})}" alt="Image actuelle">
                        </div>

                        <div>
                            <label for="image">Changer l'image (optionnel)</label>
                            <input id="image" type="file" name="image" accept="image/*">
                            <small style="color: #6e6e73; font-size: 0.875rem; display: block; margin-top: 8px;">
                                Laissez vide pour garder l'image actuelle
                            </small>
                        </div>

                        <button class="btn" type="submit">
                            <i class="fa-solid fa-check"></i>
                            Enregistrer les modifications
                        </button>
                    </form>

                    <div class="text-center mt-4">
                        <a class="btn btn-outline" th:href="@{/admin/article/list}">
                            <i class="fa-solid fa-arrow-left"></i>
                            Retour à la liste
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </div>
</body>

</html>