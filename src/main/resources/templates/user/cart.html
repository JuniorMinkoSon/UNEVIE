<!doctype html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    premium: {
                        orange: '#f97316',
                        dark: '#1a1a1a',
                        light: '#fdfcfb',
                        accent: '#fbbf24'
                    }
                },
                fontFamily: {
                    sans: ['Outfit', 'sans-serif'],
                }
            }
        }
    }
</script>
</head>

<body class="bg-premium-light text-premium-dark font-sans flex flex-col min-h-screen">
    <!--================= HEADER =================-->
    <div th:replace="~{fragments/header :: header}"></div>

    <main class="flex-grow pt-32 pb-24">
        <section class="max-w-4xl mx-auto px-6 space-y-12">
            <div class="space-y-4">
                <h1 class="text-4xl md:text-5xl font-extrabold text-premium-dark tracking-tight">Votre Panier</h1>
                <p class="text-premium-dark/40 text-lg">Vérifiez vos sélections avant de finaliser votre commande.</p>
            </div>

            <div class="bg-white rounded-[3rem] p-8 md:p-12 shadow-sm border border-premium-dark/5 overflow-hidden">
                <div class="overflow-x-auto" th:if="${panier != null && !panier.isEmpty()}">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-premium-dark/5 text-left">
                                <th class="pb-6 font-bold text-premium-dark/40 uppercase tracking-widest text-[10px]">
                                    Prestation / Produit</th>
                                <th
                                    class="pb-6 font-bold text-premium-dark/40 uppercase tracking-widest text-[10px] text-center">
                                    Quantité</th>
                                <th
                                    class="pb-6 font-bold text-premium-dark/40 uppercase tracking-widest text-[10px] text-right">
                                    Prix Unitaire</th>
                                <th class="pb-6"></th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-premium-dark/5">
                            <tr th:each="l : ${panier}" class="group">
                                <td class="py-8">
                                    <div class="flex items-center gap-4">
                                        <div
                                            class="w-16 h-16 bg-premium-dark/5 rounded-2xl flex items-center justify-center text-premium-orange shrink-0">
                                            <i class="fas fa-box-open"></i>
                                        </div>
                                        <span
                                            class="font-bold text-lg text-premium-dark group-hover:text-premium-orange transition-colors"
                                            th:text="${l.produit.nom}">Nom</span>
                                    </div>
                                </td>
                                <td class="py-8 text-center font-bold" th:text="${l.quantite}">1</td>
                                <td class="py-8 text-right font-bold text-lg"
                                    th:text="${#numbers.formatDecimal(l.produit.prix, 0, 'COMMA', 0, 'POINT') + ' FCFA'}">
                                    1,000 FCFA</td>
                                <td class="py-8 text-right">
                                    <a th:href="@{/cart/remove/{id}(id=${l.produit.id})}"
                                        class="w-10 h-10 bg-red-50 text-red-500 rounded-xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all transform hover:rotate-90">
                                        <i class="fas fa-times"></i>
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Empty state -->
                <div th:if="${panier == null || panier.isEmpty()}" class="py-12 text-center space-y-6">
                    <div
                        class="w-24 h-24 bg-premium-dark/5 rounded-full flex items-center justify-center mx-auto text-premium-dark/10 text-4xl">
                        <i class="fas fa-shopping-basket"></i>
                    </div>
                    <p class="text-premium-dark font-bold text-xl">Votre panier est vide.</p>
                    <a th:href="@{/projets}"
                        class="inline-block text-premium-orange font-bold hover:underline">Continuer mes achats →</a>
                </div>

                <div class="mt-12 pt-12 border-t border-premium-dark/5 flex flex-col md:flex-row items-center justify-between gap-8"
                    th:if="${panier != null && !panier.isEmpty()}">
                    <a th:href="@{/projets}"
                        class="text-premium-dark/40 font-bold hover:text-premium-orange transition-colors flex items-center gap-2">
                        <i class="fas fa-arrow-left text-sm"></i>
                        Continuer mes achats
                    </a>
                    <a th:href="@{/checkout}"
                        class="bg-premium-orange text-white font-bold px-12 py-5 rounded-2xl hover:bg-premium-dark transition-all shadow-xl shadow-premium-orange/20 text-lg active:scale-95 text-center w-full md:w-auto">
                        Passer à la commande
                    </a>
                </div>
            </div>
        </section>
    </main>

    <div th:replace="~{fragments/footer :: footer}"></div>
</body>
</body>

</html>